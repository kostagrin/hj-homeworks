<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Задача 1. Пианино | Домашнее задание к лекции 2.1</title>
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
  <ul class="set middle">
    <li class="white">
      <audio src=""></audio>
    </li>
    <li class="black">
      <audio src=""></audio>
    </li>
    <li class="white">
      <audio src=""></audio>
    </li>
    <li class="black">
      <audio src=""></audio>
    </li>
    <li class="white">
      <audio src=""></audio>
    </li>
  </ul>


  <script>
    'use strict';
    const pianoKeySet = document.getElementsByClassName('set')[0]; // ROOT NODE
    const pianoKeys = pianoKeySet.querySelectorAll('li'); // SOUNDS LIST

    const soundList = [
      'first.mp3',
      'second.mp3',
      'third.mp3',
      'fourth.mp3',
      'fifth.mp3'
    ];

    let currentTone = 'middle';

    /*remove all possible tones from the ROOT NODE and set it to the currentTone*/
    function setCurrentTone() {
      pianoKeySet.classList.remove('middle', 'higher', 'lower');
      pianoKeySet.classList.add(currentTone);
    }
    setCurrentTone();

 
    function changeCurrnetTone(event) {
      if (event.altKey) {
        currentTone = 'higher';
        setCurrentTone();
      } else if (event.shiftKey) {
        currentTone = 'lower';
        setCurrentTone();
      } else {
        currentTone = 'middle';
        setCurrentTone();
      }
    }

    function setSoundSources() {
      for (let i = 0; i < pianoKeys.length; i++) {
        pianoKeys[i].firstElementChild.src = `./sounds/${currentTone}/${soundList[i]}`;
      }
    }

    function palySound() {
      setSoundSources();
      event.currentTarget.firstElementChild.currentTime = 0;
      event.currentTarget.firstElementChild.play();
    }

    pianoKeys.forEach(key => {
      key.addEventListener('click', palySound);
    });

    document.addEventListener('keydown', changeCurrnetTone);
    document.addEventListener('keyup', changeCurrnetTone);
  </script>
</body>

</html>